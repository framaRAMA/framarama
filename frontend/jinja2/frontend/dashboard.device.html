{% extends "frontend/dashboard.base.html" %}

{% block content_dashboard %}

<div class="pt-2">
  {{ lib.field_text('Uptime', '%d days, %d hours, %d minutes'|format(sys['uptime']['days'], sys['uptime']['hours'], sys['uptime']['minutes'])) }}
  {{ lib.field_text('Memory usage', '%d%% of %d MB (%d MB free)'|format(mem['usage'], mem['total']/1024, mem['free']/1024)) }}
  {{ lib.field_text('CPU', '%.2f load, %d Â°C'|format(cpu['load'], cpu['temp'])) }}
  {{ lib.field_text('Network', '%s IP %s, Gateway %s'|format(network['config']['mode'], network['config']['ip']|join(', '), network['config']['gateway'])) }}
  {{ lib.field_text('Disk', 'Data %.2f MB free, Temp %.2f MB free'|format(disk['datafree']/1024, disk['tmpfree']/1024)) }}
</div>

<div class="pt-4 text-center">
  <a href="{{ url('fe_dashboard_device') }}?action=device.log" class="btn btn-outline-primary btn-outline btn-floating btn-lg" title="Show log">{{ lib.icon('action.log') }}</a>
  <a href="{{ url('fe_dashboard_device') }}?action=device.restart" class="ms-2 btn btn-outline-secondary btn-floating btn-lg" title="Restart application">{{ lib.icon('action.restart') }}</a>
  <a href="{{ url('fe_dashboard_device') }}?action=device.shutdown" class="ms-2 btn btn-outline-danger btn-floating btn-lg" title="Shutdown device">{{ lib.icon('action.shutdown') }}</a>
</div>

{% if log %}
  <h6 class="pt-5">Application Log</h6>
  <div class="pt-2">
    <pre class="p-2 .pre-scrollable border rounded border-primary smaller">{{ log.decode() }}</pre>
  </div>
{% endif %}

{% endblock %}
